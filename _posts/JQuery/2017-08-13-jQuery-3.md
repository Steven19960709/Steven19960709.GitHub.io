---
layout: post
title: jQuery 操作DOM
date: 2017-08-13
tags: [jquery]
---

现在继续来讲jQuery的相关知识。

## jQuery操作DOM

### 查：

最简单的方法就是利用选择器来进行选择，然后获取该节点的信息。

第二种方法就是，上一篇补充的内容讲过attr方法，它可以根据属性来获取元素，它的参数可以是一个，也可以是两个。当参数是一个的时候，就是要查询的属性的名字。

	var $para = $("p");
	var p_tet = $para.attr('title');//获取p元素的属性title

### 增：

我们还可以利用jQuery来添加节点，而且可以是动态的创建HTML内容，是文档浏览器里面的呈现效果直接发生变化，最典型的一个例子，就是我们常常遇见的登录框，这个登录框是等我们点击登录的时候他才会出来的，不点击的时候它是没有的，如果利用html 建立一个元素，然后display:none，这样是很不“划算”的，最好的方法就是在js中，动态的创建。

创建节点

我们可以利用jQuery的$()函数进行创建，直接把想创建的html标签写在里面，他就可以创建创建出一个dom对象了，并将这个DOM对象包装成一个jQuery对象后返回。例如：

	var $div = $("<div class="hhh">哈哈哈</div>");//可以有属性有文本，甚至是更加复杂的结构

这样就可以成功创建一个元素节点了，jQuery强大之处在于，即使你没有写完整，“</div>”，它也能创建成功，当然，我们还是要按标准来。创建完成之后，我们需要将它插进到页面当中，利用append()方法。例如：

	$("body").append($div);
	
必须要最后插入到页面才能显示出来。
	
### 插入节点

动态创建HTML元素并没有啥用，急需要将创建的元素插入到文档当中。那么有这几个方法可以实现插入节点：
	
$a.append(b)：向每个匹配的元素内部追加内容;将b加入到a中

	<p>I am a boy</p>
	$('p').append('<strong>a nice boy</strong>') //<p>I am a boy</p><strong>a nice boy</strong>

$a.appendTo(b): 这个实际上实根append相反的操作，它是将a添加到b中。

$a.prepend(b): 这个是将b加入到a内容的最前。

	<p>Steven</p>
	$('p').append('<strong>I am</strong>') //<p><strong>I am</strong> Steven</p>

	
$a.prependTo(b):这个也是跟prepend相反的，就是想a插入到b的最前。

$a.after(b)：在a后面添加b。
	
	<p>忘不了的</p>	
	$("p").after(<em>初恋</em>);//<p>忘不了的</p>	<em>初恋</em>
	
$a.insertAfter(b)：这个跟after相反的，是在b后面插入a。

$a.before(b):这个跟after是类似的，但是是插入在前面

$a.insertBefore(b):跟before相反，这里就不一一举例了。

注意的是，上述插入节点的方法，不仅能将新创建的DOM元素插入到文档中，它还有另外一个功能就是剪切元素，append可以将元素节点从原来的地方剪切，然后放到另外的地方。

	<ul>
	<li>香蕉</li>
	<li>苹果</li>
	<li>梨子</li>
	</ul>
	$apple = $(li:eq(1));
	$peach = $(li:eq(2));
	$peach.insertBefore($apple) //最后变成就香蕉 梨子 苹果

### 删除节点

1.remove()

remove方法可以将元素从dom中删除，传入的参数就是选择器。，而且要注意的是，利用这个方法，被删除的节点所绑定的事件将不复存在。不过，它会返回一个已删除的节点的引用，还能继续使用，但是没有了原来的事件而已。

2.detach()

这个方法和remove一样，都是可以删除所匹配到的元素。但是最大的区别在于，它不会把原来的事件也删除，下次使用的时候，事件能继续使用。

3.empty()

严格来讲，这个方法并不是删除节点，而是清空节点，他能清空元素中的所有后代节点。

### 复制节点

复制节点，使用clone()方法来完成，被复制的节点不具有任何行为，即使不继承原来的事件，如果需要新元素，也具有复制功能，可以在clone方法传一个参数，true，这样就可以也有事件了。

### 替换节点 

$a.replaceWith(b): 这个方法就是用b来替换a。
	
	$a = $('<div>hahaha</div>');
	$('p').replaceWith($a);//用$a来替换p标签
	
$a.replaceAll(b): 这个跟第一个方法是相反的操作，它是用a来替换b。

要注意的是，如果在替换之前已经为元素绑定了事件，那么替换后原先绑定的事件将会域被替换的元素一同消失，需要重新绑定。

### 包裹节点

jQuery提供了将某个节点用其他节点包裹起来的方法。

wrap()。该方法对于需要在文档当中插入额外的结构化标记非常有用，而且它不会破坏原始的文档的语义。

	$("strong").wrap('b')//利用b标签将strong标签包裹起来。

wrapAll()，这个方法将所有的匹配的元素用一个元素来包裹。它不同于wrap方法，wrap是将所有的元素进行单独的包裹。要注意的是，如果被包裹的多个元素间有其他元素，其他元素会被放到包裹元素之后。

wrapInner()：给每一个匹配的元素的子元素，用其他结构化的标记包裹起来。意思就是在父元素内部进行包裹。

## 属性操作 

讲到属性，又要提到attr()这个方法了，它可以用来获取和设置元素属性，还有另外一个方法就是removeAttr()用它可以删除元素属性。

1.获取属性和设置属性

如果要获取某个元素的属性，首先要给attr()方法传递一个参数，就是属性的名称。如果要设定属性，就要穿另外一个参数就是属性名称对应的值。如果需要一次性为同一个元素设定多个属性，可以利用对象的格式进行传值。例如：
	
	$('a').attr('class');  //获取a标签的class属性值
	$('a').attr('class','FE') //将a标签的class属性值设定为FE。
	$('a').attr({
		'title' : "connection",
		'name'  : "a label"
		});//将一个名值对形式的对象设置为匹配元素的属性
		
2.删除属性

当我们需要删除文档中某个元素的特定属性，可以使用removeAttr()方法来完成。传入的第一个参数就是需要删掉的属性，如果没有传参，它将会将所有的属性都删除。

3.添加样式

注意如果利用attr给class设定属性的话，它是会把原来的属性覆盖的。如果我们需要额外加一个属性，需要用到这个addClass()方法。它是具有一个追级属性追加属性的功能，即在原有的基础上，多添加一个属性。这个在我们更改某个元素的时候，如果需要更改元素的样式，可以通过修改它们的类型进行间接地修改，这样效率会很高。

4.删除样式

跟addClass相对的还有一个方法就是removeClass()，它的功能就是可以删掉匹配元素的某个类名或者全部类名。

5.切换样式

toggle()方法作用是可以交替执行两个代码，如果元素原来是显示的，则隐藏他，如果原来是隐藏的，则显示他。此时toggle()方法主要是控制行为上的切换。这个我们在事件中会再讲，今天主要讲它的引申，toggleClass().

toggleClass()可以控制样式上的重复切换。如果类名存在，则删除它，如果类名不存在，则添加它。例如：

	$('div').toggleClass('another')  //重复切换类名‘another’

我们可以来一个点击事件，当点击某个按钮的时候，触发一次类名的切换，来换取不同的样式。

6.判断样式是否存在

利用hasClass()可以用来判断元素中是否含有某个class，如果有则返回true，如果没有则返回false。

### 设定和获取html，文本的值

1. html()方法

这个方法依赖于原生的innerHTML属性，可以利用它来读取或者设置某个元素中的html内容，如果不传参数，就是读取内容，如果传参就是为某元素设定HTML内容。

2.text()方法

这个方法依赖于原生的innerText属性，可以用来读取或者设置某个元素的文本内容。它的操作方法跟html()是一模一样的。这里就不再赘述了。

3.val()方法

此方法跟JavaScript原生的value属性类似，可用来设置或获取元素的值。典型的就是输入框的聚焦和失焦的例子。

	<input id="address" value="id">
	$a = $('#address');
	$a.focus(function(){
	    if($a.val() == "hh"){
		$(this).val("");
	    }
	})//聚焦清空
	$a.blur(function() {
		if($a.val() == ""){
			$(this).val("hh");
		}
	}//失焦之后填写hh

### 遍历节点

1.children() 方法

这个方法获得的是匹配元素的子元素。通过计算子元素长度，我们可以知道，该父级中有多少个子元素，注意的是不包含孙子辈的。

2.next()方法

该方法可以获得元素紧跟着的兄弟元素。

3.prev()方法

获得的是该方法前面的一个兄弟元素。

4.siblings()方法，这个方法是用来取得匹配元素所有的兄弟元素。

5.closest() 方法

这个方法获取的是元素的最近的祖先元素，可以有参数，selector能把自己选中

6.parent(),parents()与closest()区别

parent()：获得每个匹配元素的父级原宿

parents()：获得集合中每个元素的祖先元素

closest()：从元素本身开始，逐级向上匹配，并返回最先匹配到的祖先元素。

offsetParent()：寻找最近的有定位的父级。 

### css-dom 操作

1.css() 

这个是很厉害的一个方法，可以通过它来设定元素的css属性,之前已经介绍过了，现在就不再介绍了。

2.offset()方法

它的作用是获取元素在当前是视窗的相对偏移，其中返回的对象有两个属性，即top和left。它们只对可见元素有效。	
	
	var offset = $('p').offset();
	var left = offset.left;
	var top = offset.top;

3.position()

它是获取元素相对于最近的一个position样式属性设置为relative或者absolute的父节点的相对偏移。返回值和操作同上。

4.scrollTop()方法和scrollLeft()

这两个方法的作用分别是获取元素的滚动条距顶端的距离和距左端的距离。可以传递一个参数，空值元素的滚动台滚动到指定位置。例如：
	
	$('div').scrollTop(300);
	$('div').scrollLeft(300);


........终于是讲完了。。。。。。我的天啊。。。。

<img src="https://ojlty2hua.qnssl.com/image-1502635356441-5o2V6I63LlBORw==.PNG?imageView2/0/q/75|imageslim">

为了梦想，多多少少要付出一点。。。加油！！！












