---
layout: post
title:  JavaScript 初探
date: 2017-07-13
categories: blog
tags: [JavaScript]
---

大家好啊，博主终于是考完试了，之前因为一直在临急抱佛脚，没有时间更新博客了，今天就正式给大家开始讲JavaScript。

## JavaScript发展史

JavaScript依赖于浏览器的存在，一开始的浏览器没有JavaScript，只有HTML和css，在1996年，JavaScript作为Natscape Navigator 浏览器的一部分出现。它的最初的设计目标是改善网页用户体验。这里要说一下，它的作者是Brendan Eich。

要给JavaScript澄清一下，JavaScript跟java真的是一点关系都没有，它俩是完全不一样的两种语言。大家不要以为JavaScript跟Java都有Java这样的字眼，就认为他们有关系，其实不然。

最初JavaScript被命名为LiveScript，后因和sun公司（Java）合作，做联合推广，因市场宣传更改名为JavaScript。后来sun公司被oracle公司收购了，JavaScript版权归oracle所有。

## 浏览器组成 

记得之前在介绍css的时候，介绍过浏览器组成，现在在炒一下冷饭吧。

浏览器分为shell部分和内核部分。内核部分又有渲染引擎（语法规则和渲染），和JavaScript引擎。最出名的就是chrome的JavaScript引擎，就是著名的v8引擎。它的特点就是可以直接把JavaScript编译为机器码，所以这速度是最快的，至今，也是渲染速度最快的。

## JavaScript的特点 

### 解释型语言

首先我们要知道，计算机语言有两种，第一种称为编译型语言，第二种称为，解释型语言。

编译型语言：先全局扫一遍，（看语法，叙述），然后生成一个编译文件，执行的是编译文件，这个速度快，但是跨平台型差。C，C++等

解释型语言：翻译一行，执行一行，速度慢，但是可以跨平台。典型代表：所有脚本语言，PHP，Python。

注意Java属于中间的，既不是编译型语言，也不是解释型语言。因为Java用到了虚拟机的过渡，有兴趣大家可以自己去了解一下。

我们的JavaScript就是解释型语言。


### 单线程

首先要理解一下，异步和同步这个概念。

异步就是，同一时间可以干多件事情。同步就是，同一时间只能干一件事情。

单线程，同一时间，只能干一件事情。 多线程，同一时间，能干多个事情。


## JavaScript 队列执行 

我们可以想像一下，利用JavaScript的定时器，设定两个方块，第一个方块每一毫秒走50像素，第二个方块，每辆毫秒走30像素，这时候，我们看起来这就像两个方块是同时动起来的，但是鉴于JavaScript是单线程的语言，不应该存在一个时刻处理多个事件。这时候，就有这个JavaScript执行队列的说法了。

JavaScript执行队列，就是让单线程的程序，执行起来像多线程。就像吃饭，当我们把吃饭的时间缩短为一秒钟，我们可以看到，饭菜是同时较少的。其实这就类似于执行主线程的处理方法。

首先，JavaScript执行主线程，是唯一一个执行任务的线程，没有它，就没有任何效果，而且它只有一个，这时候，如果有两个任务需要执行，那么JavaScript将会将任务分成为多个执行片段，每一段时间向js执行主线程抛入一个任务，例如task1要1秒才能执行完，task2需要2秒执行完，这时候，JavaScript引擎，将会把它们按照1ms（不一定为1ms，这里只是举例而已，但是肯定是比较小的时间段）为单位，分割成多个任务片段，每一毫秒只能有一个任务片段抛给主线程，。（这个过程叫做争抢时间片）。这样看起来就像是同一时间执行多个任务，前提是，时间需要足够的短，不然就看不出来了。（如果实在不懂，可以跟我一起讨论）。

##  开始学习JavaScript

js三大部分，ECMAScript ， DOM，BOM。前两个最重要，第三个工业开发基本不用，因为权限太大了，不允许。

### 引入JavaScript

使用script标签来进行引入。src属性就是script文件的路径。

第二种方法就是在script内部进行编写。有一点就是，script标签加载的时候，它会把所有内容都阻塞了，所有东西都不能够进行操作，必须要等到JavaScript加载完才能进行操作。所以我们最后把script放在body的底部。避免阻塞正常内容。为了符合工业开发，所有的HTML、css、JavaScript文件都要进行分离，不能放在同一个文件里面。（样式，结构，交互相分离）


##  变量（variable）

把数据放在一个变量里面，是为了以后方便使用。这就是变量的作用。这时候，我们需要向系统索取一个空间，来存放这个变量，这过程叫做变量的声明。

      var  a = 1;

声明变量并赋值为1.当我们同事声明多个变量的时候，可以这样写：

    var a = 1,
    b = 3,
    c = 5;

以分号进行结束。

### 命名规则

1，变量声明，单一使用var，不能使用关键字进行声明。

2，不可以使用系统的保留字进行声明。（）break

3，变量名必须以英文字母、_、$开头。不能够用数字开头。

--------------------------------------------------分隔线

刚刚下楼跑了5公里，哇，爽！~下面继续。

下面介绍一下JavaScript的数据类型。

## JavaScript数据类型

JavaScript数据类型，分为两大类，第一类为原始值，第二类为引用值。

### 原始值 （栈数据 stack）

1.数字类型，  Number 。eg：123,”555，、、、、

2.字符串类型， String。"this is a string ",必须要用双引号或单引号进行包含，不能使用一单一双。

3.布尔值，Boolean。true or false。只有对或错。

4.undefined 未定义。它的内容只有一个，就是他本身 undefined.

5.null 表空的意思。这个类只有一个内容，就是null。

### 引用值（堆数据 heap）

1.数组，[1,2,3]

2.对象，{name：‘steven’}.

3.函数，function。


### 原始值和引用值根本区别

ECMAScript规范中定义了变量的两种类型：原始值类型和引用值类型。区别两种类型的直接特征是：存储位置。如果某种变量是直接存储在栈(stack)中的简单数据段，即为原始值类型，如果是存储在堆(heap)中的对象，则为引用值类型。

那么，为什么要分栈和堆两种方式存储？栈空间小，但可以被解释器直接检索，响应速度快；堆空间大，但不能被程序栈直接检索，响应速度稍慢。

再进一步，哪一类变量需要放入栈，哪一类又该放入堆呢？

一般而言，栈中存放的变量（原始值类型）都具有占据空间小、大小固定的特点。只有String是个特例，虽然它不具备大小固定的要求，但JS中明确规定了 String 是不可变的，鉴于如此稳定而又会被频繁使用，所以放入栈中存储。在其他语言中，String 是可以在适当条件下修改的，因此被放入堆中存储。

堆中存放的变量（引用值类型）都具有占据空间大、大小不固定的特点，因此如果也存储在栈中，将会影响程序运行的性能。引用值类型还在栈中存储了指针，该指针指向堆中该实体的起始地址。当解释器寻找引用值时，会首先检索其在栈中的地址，取得地址后从堆中获得实体。

栈数据，好比一个两边相同的桶，当它放到地上的时候，它就变成了有底没有顶，往里面放东西的时候，先进去的后出来，first in last out。

堆数据，两边都相通，没有last in first out 这个规则。


### 原始值和引用值的修改。

对于原始值，当我们对它进行修改的时候，其实并不是重新给它赋一个值，而是，将原来的栈地址的变量名删掉，重新取一个新地址，然后给新地址命名，并赋值。例如：

    var a = 123;
    a = 234;
    
首先，js引擎向系统索取了一个地址，假设为1000，来放a这个变量，然后赋值为123。然后当我们修改这个变量的时候，原来的1000地址，的名字将不再为a，但是它的数据仍然存在。并且，系统将另外取一个地址，假设为1001，这个地址将会命名为a，并且，值为233。这个就是原始值的修改，它并不是真正意义上的删除，而是将原来的地址名字删掉，并重新赋值一个新地址而已，利用这个原理，我们可以实现数据的恢复。

对于引用值，先看下列代码：

            var arr = [1,2,3,4];

            var arr1 = arr;
   
对于引用值，当我们把一个变量给另一个变量的时候，只是把地址给该变量，如图示：

<img src="https:">

我们看到，当新建一个arr的时候，其实是现在栈地址中新建一个地址，然后命名为arr，接着，在堆地址赋值，并将arr指向该堆地址，当把arr赋值给arr1的时候，并没有新建一个堆地址来放置arr1，而是将arr的地址给了arr1，相当于arr1 指向的是arr的地址，当arr放生改变的时候，那么arr1也会发生改变。


## JavaScript基本语法

1.利用分号，';'，来表示语句的结束。

2.当一个代码块发生错误的时候，会引发后续代码的继续执行，但是不会影响其以上的代码块。

3.书写格式要规范，“= + / -”两边都应该有空格。

OK，那么今天的JavaScript就介绍到这里吧，希望大家能有所收获。
























