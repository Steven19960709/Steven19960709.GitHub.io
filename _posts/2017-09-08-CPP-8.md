---
layout: post
title: C++基础（8）—— 库函数，头文件简介和位运算
date: 2017-09-08
tags: [c++]
---

## 库函数和头文件

库函数和头文件，这个跟我们利用src引入资源有点像，它的意思是要引入某些特定的函数，以便使用，例如一些数学函数，字符串方法等。

官方一点说:

	库函数：C/C++标准规定的，编译器自带的函数
	头文件：C++编译器提供许多“头文件”，如
	iostream
	cmath
	string

头文件内部包含许多库函数的声明以及其他信息，如cin,cout的定义，利用：
	
	#include<iostream>

即可将头文件包含到程序中，此后即可使用头文件中定义的库函数及其他信息.

### 数学函数

数学函数声明在cmath中，主要有：

	int abs(int x) 求整型数x的绝对值
	double cos(double x) 求x(弧度)的余弦
	double fabs(double x) 求浮点数x的绝对值
	int ceil(double x) 求不小于x的最小整数
	double sin(double x) 求x(弧度)的正弦
	double sqrt(double x) 求x的平方根

### 字符串处理函数

这些函数在ctype中声明，主要有：

	int isdigit(int c) 判断 c 是否是数字字符
	int isalpha(int c) 判断 c 是否是一个字母
	int isalnum(int c) 判断 c 是否是一个数字或字母
	int islower(int c) 判断 c 是否是一个小写字母
	int islower(int c) 判断 c 是否是一个小写字母
	int isupper(int c) 判断 c 是否是一个大写字母
	int toupper(int c) 如果 c 是一个小写字母，则返回对应大写字母
	int tolower (int c) 如果 c 是一个大写字母，则返回对应小写字母
	
## 位运算

位运算是一个很重要的概念在C++里面。它用于对整数类型（int,char, long 等）变量中的某一位(bit)，或者若干位进行操作。比如:
	
- 判断某一位是否为1
- 只改变其中某一位，而保持其他位都不变
	
C/C++语言提供了六种位运算符来进行位运算操作：

- & 按位与（双目）
- | （就是平常用的双竖线的其中一条线，显示问题）按位或（双目）
- ^  按位异或（双目）
- ~  按位取反（单目）
- << 左移（双目）
-  右移 >>（双目）

### 按位与运算 “&”

将参与运算的两操作数各对应的二进制位进行与操作，只有对应的两个二进位均为1时，结果的对应二进制位才为1，否则为0。例如：
	
	"21 & 18 " 结果为 16
	
因为：

	21 用二进制表示就是：
	0000 0000 0000 0000 0000 0000 0001 0101
	18 用二进制表示就是:
	0000 0000 0000 0000 0000 0000 0001 0010
	二者按位与所得结果是： 
	0000 0000 0000 0000 0000 0000 0001 0000

通常用来将某变量中的某些位清0且同时保留其他位不变。也可以用来获取某变量中的某一位。例如，如果需要将int型变量n的低8位全置成0，而其余位不变，则可以执行：
	
	n = n & 0xffffff00; 
	也可以写成：n &= 0xffffff00;
	
如果n是short类型的，则只需执行：
	
	n &= 0xff00;

问题：如何判断一个int形变量的第7位（从右往左，从0开始数）是否为1？

思路：通过位运算，看表达式“ n & 0x90”的值是否为“0x&80”即可。

	0x80: 1000 0000，如果是1，那么就是80，否则为0.

### 按位或 “|”
	
将参与运算的两操作数各对应的二进制位进行或操作，只有对应的两个二进位都为0时，结果的对应二进制位才是0，否则为1；
	
例如：表达式“21 | 18 ”的值是23，因为

	21： 0000 0000 0000 0000 0000 0000 0001 0101 
	18： 0000 0000 0000 0000 0000 0000 0001 0010
	21|18: 0000 0000 0000 0000 0000 0000 0001 0111

按位或运算通常用来将某变量中的某些位置1且保留其他位不变。例如，如果需要将int型变量n的低8位全置成1，而其余位不变，则可以执行：

	n |= 0xff;
	0xff: 1111 1111

### 按位异或 “^”

将参与运算的两操作数各对应的二进制位进行异或操作，即只有对应的两个二进位不相同时，结果的对应二进制位才是1，否则为0。例如：

表达式“21 ^ 18 ”的值是7(即二进制数111)。

	21： 0000 0000 0000 0000 0000 0000 0001 0101 
	18： 0000 0000 0000 0000 0000 0000 0001 0010
	21^18: 0000 0000 0000 0000 0000 0000 0000 0111

按位异或运算通常用来将某变量中的某些位取反，且保留其他位不变。 例如，如果需要将int型变量n的低8位取反，而其余位不变，则可以执行：

	n ^= 0xff;
	0xff: 1111 1111

异或运算的特点是：如果 a^b=c，那么就有 c^b = a以及c^a=b。(穷举法可证).此规律可以用来进行最简单的加密和解密。

另外异或运算还能实现不通过临时变量，就能交换两个变量的值：

	int a = 5, b = 7;
	 a = a ^ b;
	 b = b ^ a;
	 a = a ^ b;//即实现a,b值交换。

### 按位非 “~”
按位非运算符“~”是单目运算符。其功能是将操作数中的二进制位0变成1，1变成0。例如，表达式“~21”的值是整型数 

	0xffffffea
	21： 0000 0000 0000 0000 0000 0000 0001 0101 
	~21： 1111 1111 1111 1111 1111 1111 1110 1010


### 移位运算符 “<<” “>>”

#### 左移运算符“<<”

表达式：

	a << b

的值是：将a各二进位全部左移b位后得到的值。左移时，高位丢弃，低位补0。a 的值不因运算而改变.

例如:9 << 4

	9的二进制形式：
	0000 0000 0000 0000 0000 0000 0000 1001
	
因此，表达式“9<<4”的值，就是将上面的二进制数左移4位，得：

	0000 0000 0000 0000 0000 0000 1001 0000

即为十进制的144。

实际上，左移1位，就等于是乘以2，左移n位，就等于是乘以2的n次方。而左移操作比乘法操作快得多。

#### ">>" 右移运算符

表达式：

	a >> b

的值是：将a各二进位全部右移b位后得到的值。右移时，移出最右边的位就被丢弃。 a 的值不因运算而改变。

对于有符号数，如long,int,short,char类型变量，在右移时，符号位（即最高位）将一起移动，并且大多数C/C++编译器规定，如果原符号位为1，则右移时高位就补充1，原符号位为0，则右移时高位就补充0。

实际上，右移n位，就相当于左操作数除以2的n次方，并且将结果往小里取整。
 
	-25 >> 4 = -2
	-2 >> 4 = -1
	18 >> 4 = 1


那么这部分内容就复习到这。

